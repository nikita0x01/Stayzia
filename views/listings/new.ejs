<% layout('layouts/boilerplate') %>

<body style="font-family: Arial, sans-serif; background: #f8f9fa; padding: 40px;">
  <div style="max-width: 500px; margin: auto; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">

    <h3 style="text-align: center; margin-bottom: 20px; color: #333;"><b>Create a New Listing</b></h3>

    <!-- START FORM -->
    <form id="listingForm" method="POST" action="/listings" style="display: flex; flex-direction: column; gap: 18px;" novalidate class="needs-validation" enctype="multipart/form-data">
      
      <div class="mb-3">
        <label style="font-weight: bold; color: #555;"><b>Title</b> <span style="color: red;">*</span></label>
        <input name="listing[title]" placeholder="Enter title" type="text" class="form-control" required
               style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
        <div class="invalid-feedback">Please enter a title.</div>
      </div>

      <div class="mb-3">
        <label style="font-weight: bold; color: #555;">Description <span style="color: red;">*</span></label>
        <input name="listing[description]" placeholder="Enter description" type="text" class="form-control" required
               style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
        <div class="invalid-feedback">Please enter a description.</div>
      </div>

      <div class="mb-3">
  <label style="font-weight: bold; color: #555;">Place photo</label>
  <input name="listing[image]" placeholder="Enter image URL / Link" type="url" class="form-control"
         style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
  
</div>

<div class="mb-3">
  <label style="font-weight: bold; color: #555;">Upload Verification Document (For Safety & Trust)</label>
  <input name="listing[image]" type="file" class="form-control"
         style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
  
</div>

      <div class="mb-3">
        <label style="font-weight: bold; color: #555;">Price <span style="color: red;">*</span></label>
        <input name="listing[price]" placeholder="Enter price" type="number" class="form-control" required min="0"
               style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
        <div class="invalid-feedback">Please enter a valid price.</div>
      </div>

      <div class="mb-3">
        <label style="font-weight: bold; color: #555;">Location <span style="color: red;">*</span></label>
        <input name="listing[location]" placeholder="Enter location" type="text" class="form-control" required
               style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
        <div class="invalid-feedback">Please enter a location.</div>
      </div>

      <div class="mb-3">
        <label style="font-weight: bold; color: #555;">Country <span style="color: red;">*</span></label>
        <input name="listing[country]" placeholder="Enter country" type="text" class="form-control" required
               style="width: 100%; height: 50px; padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 8px;">
        <div class="invalid-feedback">Please enter a country.</div>
      </div>

      <button type="submit" class="btn btn-dark"
              style="padding: 12px; background: black; color: #fff; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; transition: 0.3s;">
        Add
      </button>
    </form>
    <!-- END FORM -->

  </div>

  <!-- âœ… Client-side validation script -->
  <script>
    (function () {
      'use strict';
      const form = document.getElementById('listingForm');

      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    })();
  </script>
</body>
